
> @azumag/opencode-rate-limit-fallback@1.49.0 test
> vitest run --reporter=json

{"numTotalTestSuites":121,"numPassedTestSuites":121,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":371,"numPassedTests":356,"numFailedTests":0,"numPendingTests":15,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1770740161656,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should initialize in CLOSED state","status":"passed","title":"should initialize in CLOSED state","duration":1.3090409999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should allow execution in CLOSED state","status":"passed","title":"should allow execution in CLOSED state","duration":0.3927500000000066,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should remain CLOSED after one failure","status":"passed","title":"should remain CLOSED after one failure","duration":0.21454099999999698,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should reset failure count after success in CLOSED state","status":"passed","title":"should reset failure count after success in CLOSED state","duration":0.2401660000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should open circuit after reaching failure threshold","status":"passed","title":"should open circuit after reaching failure threshold","duration":0.17854099999999562,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should not allow execution in OPEN state","status":"passed","title":"should not allow execution in OPEN state","duration":0.14595799999999315,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should transition to HALF_OPEN after recovery timeout","status":"passed","title":"should transition to HALF_OPEN after recovery timeout","duration":0.409000000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should close circuit after sufficient successes in HALF_OPEN","status":"passed","title":"should close circuit after sufficient successes in HALF_OPEN","duration":0.11895799999999213,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should re-open circuit on failure in HALF_OPEN state","status":"passed","title":"should re-open circuit on failure in HALF_OPEN state","duration":0.30229099999999676,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should reset to CLOSED state","status":"passed","title":"should reset to CLOSED state","duration":0.17549999999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should handle success in OPEN state (edge case)","status":"passed","title":"should handle success in OPEN state (edge case)","duration":0.12616599999999778,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should limit calls in HALF_OPEN state","status":"passed","title":"should limit calls in HALF_OPEN state","duration":0.15645800000000065,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should use configurable successThreshold","status":"passed","title":"should use configurable successThreshold","duration":0.17925000000001035,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should handle default case in canExecute (edge case)","status":"passed","title":"should handle default case in canExecute (edge case)","duration":0.08366700000000549,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitState"],"fullName":"CircuitBreaker CircuitState should handle failure in OPEN state","status":"passed","title":"should handle failure in OPEN state","duration":0.11145899999999642,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should allow execution when disabled","status":"passed","title":"should allow execution when disabled","duration":0.11495800000000145,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should allow execution for new model","status":"passed","title":"should allow execution for new model","duration":0.12133300000000702,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should track separate circuits for different models","status":"passed","title":"should track separate circuits for different models","duration":0.13741699999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should not count rate limit errors as failures","status":"passed","title":"should not count rate limit errors as failures","duration":0.10575000000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should open circuit after non-rate-limit failures","status":"passed","title":"should open circuit after non-rate-limit failures","duration":0.1280829999999895,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should record success and close circuit after recovery","status":"passed","title":"should record success and close circuit after recovery","duration":0.12437500000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should return default state for non-existent circuit","status":"passed","title":"should return default state for non-existent circuit","duration":0.07970799999999656,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should clean up stale entries","status":"passed","title":"should clean up stale entries","duration":0.10312500000000568,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should destroy and clean up all circuits","status":"passed","title":"should destroy and clean up all circuits","duration":0.17420900000000472,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should not process recordSuccess when disabled","status":"passed","title":"should not process recordSuccess when disabled","duration":0.10849999999999227,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should not process recordFailure when disabled","status":"passed","title":"should not process recordFailure when disabled","duration":0.09141599999999528,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","CircuitBreaker"],"fullName":"CircuitBreaker CircuitBreaker should not count rate limit errors as failures when disabled","status":"passed","title":"should not count rate limit errors as failures when disabled","duration":0.09104100000000415,"failureMessages":[],"meta":{}},{"ancestorTitles":["CircuitBreaker","Integration with ModelSelector"],"fullName":"CircuitBreaker Integration with ModelSelector should skip models with OPEN circuits","status":"passed","title":"should skip models with OPEN circuits","duration":0.0850420000000014,"failureMessages":[],"meta":{}}],"startTime":1770740162040,"endTime":1770740162045.1743,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/circuitbreaker.test.ts"},{"assertionResults":[{"ancestorTitles":["DiagnosticReporter","Constructor"],"fullName":"DiagnosticReporter Constructor should initialize with config and config source","status":"passed","title":"should initialize with config and config source","duration":0.8474160000000097,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","Constructor"],"fullName":"DiagnosticReporter Constructor should initialize with optional health tracker","status":"passed","title":"should initialize with optional health tracker","duration":0.12912499999998772,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","Constructor"],"fullName":"DiagnosticReporter Constructor should initialize with optional circuit breaker","status":"passed","title":"should initialize with optional circuit breaker","duration":0.07791700000001356,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","Constructor"],"fullName":"DiagnosticReporter Constructor should initialize with optional error pattern registry","status":"passed","title":"should initialize with optional error pattern registry","duration":0.3013750000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","Constructor"],"fullName":"DiagnosticReporter Constructor should initialize with optional logger","status":"passed","title":"should initialize with optional logger","duration":0.14645799999999554,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should generate a complete diagnostic report","status":"passed","title":"should generate a complete diagnostic report","duration":0.221458000000041,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should include config source and data","status":"passed","title":"should include config source and data","duration":0.28899999999998727,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should include health information when tracker is provided","status":"passed","title":"should include health information when tracker is provided","duration":0.184708999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should show health as disabled when no tracker provided","status":"passed","title":"should show health as disabled when no tracker provided","duration":0.4485830000000419,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should include error pattern statistics","status":"passed","title":"should include error pattern statistics","duration":0.13745800000003783,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should include circuit breaker information when provided","status":"passed","title":"should include circuit breaker information when provided","duration":0.07533399999999801,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should show circuit breaker as disabled when not provided","status":"passed","title":"should show circuit breaker as disabled when not provided","duration":0.04158300000000281,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateReport()"],"fullName":"DiagnosticReporter generateReport() should include active fallbacks","status":"passed","title":"should include active fallbacks","duration":0.058667000000014013,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","formatReport()"],"fullName":"DiagnosticReporter formatReport() should format report as JSON","status":"passed","title":"should format report as JSON","duration":0.47133300000001555,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","formatReport()"],"fullName":"DiagnosticReporter formatReport() should format report as text (default)","status":"passed","title":"should format report as text (default)","duration":0.9515420000000177,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","formatReport()"],"fullName":"DiagnosticReporter formatReport() should format report as text (no format specified)","status":"passed","title":"should format report as text (no format specified)","duration":0.13074999999997772,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","formatReport()"],"fullName":"DiagnosticReporter formatReport() should include all major sections in text format","status":"passed","title":"should include all major sections in text format","duration":0.08037500000000364,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","formatReport()"],"fullName":"DiagnosticReporter formatReport() should include fallback models in text format","status":"passed","title":"should include fallback models in text format","duration":0.06479100000001381,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","formatReport()"],"fullName":"DiagnosticReporter formatReport() should include retry policy in text format when configured","status":"passed","title":"should include retry policy in text format when configured","duration":0.061041999999986274,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","formatReport()"],"fullName":"DiagnosticReporter formatReport() should include circuit breaker config in text format when configured","status":"passed","title":"should include circuit breaker config in text format when configured","duration":0.2629590000000235,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateHealthReport() - Private Method"],"fullName":"DiagnosticReporter generateHealthReport() - Private Method should generate correct health stats when enabled","status":"passed","title":"should generate correct health stats when enabled","duration":0.10099999999999909,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateHealthReport() - Private Method"],"fullName":"DiagnosticReporter generateHealthReport() - Private Method should show empty stats when health tracking is disabled","status":"passed","title":"should show empty stats when health tracking is disabled","duration":0.039540999999985615,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","generateErrorPatternsReport() - Private Method"],"fullName":"DiagnosticReporter generateErrorPatternsReport() - Private Method should include pattern statistics","status":"passed","title":"should include pattern statistics","duration":0.04745900000000347,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","getCircuitBreakerStatuses() - Private Method"],"fullName":"DiagnosticReporter getCircuitBreakerStatuses() - Private Method should return circuit breaker statuses when enabled","status":"passed","title":"should return circuit breaker statuses when enabled","duration":0.196124999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","getCircuitBreakerStatuses() - Private Method"],"fullName":"DiagnosticReporter getCircuitBreakerStatuses() - Private Method should return empty array when circuit breaker not provided","status":"passed","title":"should return empty array when circuit breaker not provided","duration":0.06420800000000781,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","registerActiveFallback()"],"fullName":"DiagnosticReporter registerActiveFallback() should register an active fallback","status":"passed","title":"should register an active fallback","duration":0.04966699999999946,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","registerActiveFallback()"],"fullName":"DiagnosticReporter registerActiveFallback() should track multiple active fallbacks","status":"passed","title":"should track multiple active fallbacks","duration":0.032708000000013726,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","registerActiveFallback()"],"fullName":"DiagnosticReporter registerActiveFallback() should replace existing fallback for same session ID","status":"passed","title":"should replace existing fallback for same session ID","duration":0.03566599999999198,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","unregisterActiveFallback()"],"fullName":"DiagnosticReporter unregisterActiveFallback() should unregister an active fallback","status":"passed","title":"should unregister an active fallback","duration":0.033332999999970525,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","unregisterActiveFallback()"],"fullName":"DiagnosticReporter unregisterActiveFallback() should handle unregistering non-existent fallback gracefully","status":"passed","title":"should handle unregistering non-existent fallback gracefully","duration":0.05275000000000318,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","getActiveFallbacksCount()"],"fullName":"DiagnosticReporter getActiveFallbacksCount() should return the count of active fallbacks","status":"passed","title":"should return the count of active fallbacks","duration":0.04466700000000401,"failureMessages":[],"meta":{}},{"ancestorTitles":["DiagnosticReporter","logCurrentConfig()"],"fullName":"DiagnosticReporter logCurrentConfig() should log current configuration","status":"passed","title":"should log current configuration","duration":0.9293330000000424,"failureMessages":[],"meta":{}}],"startTime":1770740161975,"endTime":1770740161982.9294,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/diagnosticreporter.test.ts"},{"assertionResults":[{"ancestorTitles":["Headless Mode (No TUI)"],"fullName":"Headless Mode (No TUI) should fallback without crashing and log messages when TUI is missing","status":"passed","title":"should fallback without crashing and log messages when TUI is missing","duration":4.689624999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["Headless Mode (No TUI)"],"fullName":"Headless Mode (No TUI) should handle toast with different structures in headless mode","status":"passed","title":"should handle toast with different structures in headless mode","duration":0.8423329999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading with Worktree"],"fullName":"Config Loading with Worktree should load config from worktree when directory has no config","status":"passed","title":"should load config from worktree when directory has no config","duration":0.3159170000000131,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading with Worktree"],"fullName":"Config Loading with Worktree should prefer worktree config over directory config","status":"passed","title":"should prefer worktree config over directory config","duration":0.28258299999998826,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading with Worktree"],"fullName":"Config Loading with Worktree should deduplicate paths when worktree equals directory","status":"passed","title":"should deduplicate paths when worktree equals directory","duration":0.28383300000001555,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading with Worktree"],"fullName":"Config Loading with Worktree should use XDG_CONFIG_HOME when set","status":"passed","title":"should use XDG_CONFIG_HOME when set","duration":0.24312500000002046,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading with Worktree"],"fullName":"Config Loading with Worktree should handle non-array fallbackModels in config by using defaults","status":"passed","title":"should handle non-array fallbackModels in config by using defaults","duration":0.21129200000001447,"failureMessages":[],"meta":{}},{"ancestorTitles":["TUI Error Handling (Toast Fails)"],"fullName":"TUI Error Handling (Toast Fails) should log when TUI exists but showToast fails","status":"passed","title":"should log when TUI exists but showToast fails","duration":0.6451250000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["TUI Error Handling (Toast Fails)"],"fullName":"TUI Error Handling (Toast Fails) should handle missing toast.body when TUI showToast fails","status":"passed","title":"should handle missing toast.body when TUI showToast fails","duration":0.6142919999999776,"failureMessages":[],"meta":{}},{"ancestorTitles":["TUI Error Handling (Toast Fails)"],"fullName":"TUI Error Handling (Toast Fails) should handle missing toast.body.title when TUI showToast fails","status":"passed","title":"should handle missing toast.body.title when TUI showToast fails","duration":0.30220800000000736,"failureMessages":[],"meta":{}},{"ancestorTitles":["TUI Error Handling (Toast Fails)"],"fullName":"TUI Error Handling (Toast Fails) should handle missing toast.body.message when TUI showToast fails","status":"passed","title":"should handle missing toast.body.message when TUI showToast fails","duration":0.2642089999999939,"failureMessages":[],"meta":{}},{"ancestorTitles":["TUI Error Handling (Toast Fails)"],"fullName":"TUI Error Handling (Toast Fails) should handle missing toast.body.variant when TUI showToast fails","status":"passed","title":"should handle missing toast.body.variant when TUI showToast fails","duration":0.8694169999999986,"failureMessages":[],"meta":{}}],"startTime":1770740161998,"endTime":1770740162007.8694,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/headless.test.ts"},{"assertionResults":[{"ancestorTitles":["HealthTracker","recordSuccess()"],"fullName":"HealthTracker recordSuccess() should record a successful request for a model","status":"passed","title":"should record a successful request for a model","duration":1.4302919999999517,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","recordSuccess()"],"fullName":"HealthTracker recordSuccess() should update average response time using weighted moving average","status":"passed","title":"should update average response time using weighted moving average","duration":0.51400000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","recordSuccess()"],"fullName":"HealthTracker recordSuccess() should reset consecutive failures on success","status":"passed","title":"should reset consecutive failures on success","duration":0.3165829999999801,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","recordSuccess()"],"fullName":"HealthTracker recordSuccess() should track multiple models independently","status":"passed","title":"should track multiple models independently","duration":0.4665830000000142,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","recordFailure()"],"fullName":"HealthTracker recordFailure() should record a failed request for a model","status":"passed","title":"should record a failed request for a model","duration":0.2811250000000314,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","recordFailure()"],"fullName":"HealthTracker recordFailure() should increment consecutive failures","status":"passed","title":"should increment consecutive failures","duration":0.21375000000000455,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","recordFailure()"],"fullName":"HealthTracker recordFailure() should reduce health score with consecutive failures","status":"passed","title":"should reduce health score with consecutive failures","duration":0.19829200000003766,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthScore()"],"fullName":"HealthTracker getHealthScore() should return 100 for unknown models","status":"passed","title":"should return 100 for unknown models","duration":0.169083999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthScore()"],"fullName":"HealthTracker getHealthScore() should return the health score for a tracked model","status":"passed","title":"should return the health score for a tracked model","duration":0.3460420000000113,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthScore()"],"fullName":"HealthTracker getHealthScore() should reflect decreased health score for failures","status":"passed","title":"should reflect decreased health score for failures","duration":0.27454199999999673,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthScore()"],"fullName":"HealthTracker getHealthScore() should penalize slow response times","status":"passed","title":"should penalize slow response times","duration":0.29300000000000637,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthiestModels()"],"fullName":"HealthTracker getHealthiestModels() should return models sorted by health score","status":"passed","title":"should return models sorted by health score","duration":0.3069580000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthiestModels()"],"fullName":"HealthTracker getHealthiestModels() should use custom health tracker thresholds","status":"passed","title":"should use custom health tracker thresholds","duration":0.6051669999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthiestModels()"],"fullName":"HealthTracker getHealthiestModels() should use default thresholds when not specified","status":"passed","title":"should use default thresholds when not specified","duration":0.1864999999999668,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthiestModels()"],"fullName":"HealthTracker getHealthiestModels() should limit results when limit is specified","status":"passed","title":"should limit results when limit is specified","duration":0.390625,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getHealthiestModels()"],"fullName":"HealthTracker getHealthiestModels() should return all models when limit is not specified","status":"passed","title":"should return all models when limit is not specified","duration":0.3310419999999681,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","Persistence"],"fullName":"HealthTracker Persistence should save health data to file","status":"passed","title":"should save health data to file","duration":0.2958749999999668,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","Persistence"],"fullName":"HealthTracker Persistence should load health data from file on initialization","status":"passed","title":"should load health data from file on initialization","duration":0.2410000000000423,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","Persistence"],"fullName":"HealthTracker Persistence should handle missing persistence file gracefully","status":"passed","title":"should handle missing persistence file gracefully","duration":0.26387499999998454,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","Persistence"],"fullName":"HealthTracker Persistence should handle corrupted persistence file gracefully","status":"passed","title":"should handle corrupted persistence file gracefully","duration":0.41770800000000463,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getStats()"],"fullName":"HealthTracker getStats() should return statistics about tracked models","status":"passed","title":"should return statistics about tracked models","duration":0.36587499999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","getStats()"],"fullName":"HealthTracker getStats() should return zero stats when no data","status":"passed","title":"should return zero stats when no data","duration":0.23429199999998218,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","resetModelHealth()"],"fullName":"HealthTracker resetModelHealth() should reset health data for a specific model","status":"passed","title":"should reset health data for a specific model","duration":0.20579100000003336,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","resetAllHealth()"],"fullName":"HealthTracker resetAllHealth() should reset all health data","status":"passed","title":"should reset all health data","duration":0.18400000000002592,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","cleanupOldEntries()"],"fullName":"HealthTracker cleanupOldEntries() should remove old health entries","status":"passed","title":"should remove old health entries","duration":0.17637500000000728,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","cleanupOldEntries()"],"fullName":"HealthTracker cleanupOldEntries() should not remove recent entries","status":"passed","title":"should not remove recent entries","duration":0.1752079999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","isEnabled()"],"fullName":"HealthTracker isEnabled() should return true when health-based selection is enabled","status":"passed","title":"should return true when health-based selection is enabled","duration":0.2147499999999809,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","isEnabled()"],"fullName":"HealthTracker isEnabled() should return false when health-based selection is disabled","status":"passed","title":"should return false when health-based selection is disabled","duration":0.19741700000002993,"failureMessages":[],"meta":{}},{"ancestorTitles":["HealthTracker","Persistence Debouncing"],"fullName":"HealthTracker Persistence Debouncing should debounce saves","status":"passed","title":"should debounce saves","duration":0.6074590000000057,"failureMessages":[],"meta":{}}],"startTime":1770740161958,"endTime":1770740161968.6074,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/healthtracker.test.ts"},{"assertionResults":[{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should detect 429 status code in APIError","status":"passed","title":"should detect 429 status code in APIError","duration":1.9914170000000126,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should detect rate limit in message","status":"passed","title":"should detect rate limit in message","duration":0.31545799999997826,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should detect rate limit in responseBody","status":"passed","title":"should detect rate limit in responseBody","duration":0.23854199999999537,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should detect quota exceeded","status":"passed","title":"should detect quota exceeded","duration":0.28487499999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should detect too many requests","status":"passed","title":"should detect too many requests","duration":0.18250000000000455,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should detect 429 in message text","status":"passed","title":"should detect 429 in message text","duration":0.11095799999998235,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should reject non-rate-limit errors","status":"passed","title":"should reject non-rate-limit errors","duration":0.25475000000000136,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should reject null errors","status":"passed","title":"should reject null errors","duration":0.3306249999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should reject undefined errors","status":"passed","title":"should reject undefined errors","duration":0.5544579999999542,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError"],"fullName":"isRateLimitError should reject errors with rate limit in non-error fields","status":"passed","title":"should reject errors with rate limit in non-error fields","duration":0.15016700000001038,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should return default config when no config file exists","status":"passed","title":"should return default config when no config file exists","duration":3.406166999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should load custom config from project directory","status":"passed","title":"should load custom config from project directory","duration":0.15412500000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should merge user config with defaults","status":"passed","title":"should merge user config with defaults","duration":0.09262499999999818,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should validate fallback mode","status":"passed","title":"should validate fallback mode","duration":0.07695800000004738,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should handle invalid fallback mode by using default","status":"passed","title":"should handle invalid fallback mode by using default","duration":0.11870799999996962,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should load config from user home directory","status":"passed","title":"should load config from user home directory","duration":0.3843329999999696,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should handle malformed JSON gracefully","status":"passed","title":"should handle malformed JSON gracefully","duration":0.7251249999999914,"failureMessages":[],"meta":{}},{"ancestorTitles":["loadConfig"],"fullName":"loadConfig should return empty object when plugin is disabled","status":"passed","title":"should return empty object when plugin is disabled","duration":0.9814590000000294,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fallback Modes"],"fullName":"Fallback Modes should cycle and retry from first model","status":"passed","title":"should cycle and retry from first model","duration":0.8116669999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fallback Modes"],"fullName":"Fallback Modes stop: should stop and show error when all models exhausted","status":"passed","title":"stop: should stop and show error when all models exhausted","duration":0.7227500000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fallback Modes"],"fullName":"Fallback Modes retry-last: should try last model once before reset","status":"passed","title":"retry-last: should try last model once before reset","duration":0.3161670000000072,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fallback Modes"],"fullName":"Fallback Modes retry-last: should reset after last model fails","status":"passed","title":"retry-last: should reset after last model fails","duration":0.28308299999997644,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fallback Modes"],"fullName":"Fallback Modes should handle file parts without mediaType","status":"passed","title":"should handle file parts without mediaType","duration":0.8827919999999949,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fallback Modes"],"fullName":"Fallback Modes should handle errors during fallback and clean up fallbackInProgress","status":"passed","title":"should handle errors during fallback and clean up fallbackInProgress","duration":0.3438340000000153,"failureMessages":[],"meta":{}},{"ancestorTitles":["State Management"],"fullName":"State Management should track current model for session","status":"passed","title":"should track current model for session","duration":0.42250000000001364,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should handle session.error events","status":"passed","title":"should handle session.error events","duration":0.2909159999999815,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should handle message.updated events","status":"passed","title":"should handle message.updated events","duration":0.1488750000000323,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should handle session.status events with retry status","status":"passed","title":"should handle session.status events with retry status","duration":0.11779100000001108,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should show toast notification on rate limit detected","status":"passed","title":"should show toast notification on rate limit detected","duration":0.3867089999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should show toast notification when switching models","status":"passed","title":"should show toast notification when switching models","duration":0.13037499999995816,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should show toast notification on fallback success","status":"passed","title":"should show toast notification on fallback success","duration":0.13479200000000446,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should show error toast when no fallback available","status":"passed","title":"should show error toast when no fallback available","duration":0.22304099999996652,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should clean up fallbackInProgress when messages data is null","status":"passed","title":"should clean up fallbackInProgress when messages data is null","duration":0.1069999999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should handle messages with no valid parts","status":"passed","title":"should handle messages with no valid parts","duration":0.13529199999999264,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimitFallback Plugin - Event Handling"],"fullName":"RateLimitFallback Plugin - Event Handling should handle errors during fallback and clean up state","status":"passed","title":"should handle errors during fallback and clean up state","duration":0.1177080000000501,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plugin Exports"],"fullName":"Plugin Exports should export the plugin","status":"passed","title":"should export the plugin","duration":1.0665420000000267,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plugin Exports"],"fullName":"Plugin Exports should export default","status":"passed","title":"should export default","duration":0.2081670000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should register subagent on session.created event","status":"passed","title":"should register subagent on session.created event","duration":0.6905419999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should track session hierarchy correctly","status":"passed","title":"should track session hierarchy correctly","duration":0.1345410000000129,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should handle nested subagents","status":"passed","title":"should handle nested subagents","duration":0.10200000000003229,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should trigger fallback at root level for subagent rate limits","status":"passed","title":"should trigger fallback at root level for subagent rate limits","duration":0.08695799999998144,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should propagate model changes to subagents","status":"passed","title":"should propagate model changes to subagents","duration":0.09345899999999574,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should enforce maxSubagentDepth","status":"passed","title":"should enforce maxSubagentDepth","duration":0.3810829999999896,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should respect enableSubagentFallback config option","status":"passed","title":"should respect enableSubagentFallback config option","duration":0.21366599999998925,"failureMessages":[],"meta":{}},{"ancestorTitles":["Subagent Support"],"fullName":"Subagent Support should handle multiple hierarchies independently","status":"passed","title":"should handle multiple hierarchies independently","duration":0.10837500000002365,"failureMessages":[],"meta":{}},{"ancestorTitles":["Session Hierarchy Cleanup"],"fullName":"Session Hierarchy Cleanup should clean up stale session hierarchies after 1 hour TTL","status":"passed","title":"should clean up stale session hierarchies after 1 hour TTL","duration":0.5603750000000218,"failureMessages":[],"meta":{}},{"ancestorTitles":["Session Hierarchy Cleanup"],"fullName":"Session Hierarchy Cleanup should clean up sessionToRootMap entries","status":"passed","title":"should clean up sessionToRootMap entries","duration":0.2915830000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading Edge Cases"],"fullName":"Config Loading Edge Cases should handle invalid JSON in config file gracefully","status":"passed","title":"should handle invalid JSON in config file gracefully","duration":0.3043330000000424,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading Edge Cases"],"fullName":"Config Loading Edge Cases should handle config with invalid fallback mode","status":"passed","title":"should handle config with invalid fallback mode","duration":0.10462499999999864,"failureMessages":[],"meta":{}},{"ancestorTitles":["Config Loading Edge Cases"],"fullName":"Config Loading Edge Cases should handle config with invalid fallbackModels","status":"passed","title":"should handle config with invalid fallbackModels","duration":0.0800830000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["Cleanup Functionality"],"fullName":"Cleanup Functionality should properly clear cleanup interval","status":"passed","title":"should properly clear cleanup interval","duration":0.3805839999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["Cleanup Functionality"],"fullName":"Cleanup Functionality should clear sessionHierarchies on cleanup","status":"passed","title":"should clear sessionHierarchies on cleanup","duration":0.28125,"failureMessages":[],"meta":{}},{"ancestorTitles":["Cleanup Functionality"],"fullName":"Cleanup Functionality should handle multiple cleanup calls safely","status":"passed","title":"should handle multiple cleanup calls safely","duration":0.10854199999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["safeShowToast Edge Cases"],"fullName":"safeShowToast Edge Cases should handle missing toast.body.title when TUI exists and showToast fails","status":"passed","title":"should handle missing toast.body.title when TUI exists and showToast fails","duration":0.5194999999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["safeShowToast Edge Cases"],"fullName":"safeShowToast Edge Cases should handle missing toast.body.message when TUI exists and showToast fails","status":"passed","title":"should handle missing toast.body.message when TUI exists and showToast fails","duration":0.2619579999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["safeShowToast Edge Cases"],"fullName":"safeShowToast Edge Cases should handle missing toast.body.variant when TUI exists and showToast fails","status":"passed","title":"should handle missing toast.body.variant when TUI exists and showToast fails","duration":0.2611249999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["safeShowToast Edge Cases"],"fullName":"safeShowToast Edge Cases should handle toast with body missing entirely when TUI exists and showToast fails","status":"passed","title":"should handle toast with body missing entirely when TUI exists and showToast fails","duration":0.17208299999998644,"failureMessages":[],"meta":{}},{"ancestorTitles":["safeShowToast Edge Cases"],"fullName":"safeShowToast Edge Cases should handle toast with all undefined values when TUI exists and showToast fails","status":"passed","title":"should handle toast with all undefined values when TUI exists and showToast fails","duration":0.2210829999999646,"failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle null error","status":"skipped","title":"should handle null error","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle undefined error","status":"skipped","title":"should handle undefined error","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle error without name property","status":"skipped","title":"should handle error without name property","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle error with lowercase message","status":"skipped","title":"should handle error with lowercase message","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle error with uppercase message","status":"skipped","title":"should handle error with uppercase message","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle error with mixed case message","status":"skipped","title":"should handle error with mixed case message","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle error with data object but no message property","status":"skipped","title":"should handle error with data object but no message property","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should NOT match \"4291\" as a 429 error (strict word boundary)","status":"skipped","title":"should NOT match \"4291\" as a 429 error (strict word boundary)","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should NOT match \"1429\" as a 429 error (strict word boundary)","status":"skipped","title":"should NOT match \"1429\" as a 429 error (strict word boundary)","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should still match \"429\" with surrounding non-word characters","status":"skipped","title":"should still match \"429\" with surrounding non-word characters","failureMessages":[],"meta":{}},{"ancestorTitles":["isRateLimitError Edge Cases"],"fullName":"isRateLimitError Edge Cases should handle error with responseBody containing rate limit","status":"skipped","title":"should handle error with responseBody containing rate limit","failureMessages":[],"meta":{}},{"ancestorTitles":["Multiple Fallback Scenarios (Message Scope)"],"fullName":"Multiple Fallback Scenarios (Message Scope) should handle consecutive fallbacks on different messages in the same session","status":"passed","title":"should handle consecutive fallbacks on different messages in the same session","duration":0.2436670000000163,"failureMessages":[],"meta":{}},{"ancestorTitles":["Multiple Fallback Scenarios (Message Scope)"],"fullName":"Multiple Fallback Scenarios (Message Scope) should allow fallback on same message after dedup window expires","status":"passed","title":"should allow fallback on same message after dedup window expires","duration":6002.443292,"failureMessages":[],"meta":{}},{"ancestorTitles":["Multiple Fallback Scenarios (Message Scope)"],"fullName":"Multiple Fallback Scenarios (Message Scope) should clear fallback in progress when message completes successfully","status":"passed","title":"should clear fallback in progress when message completes successfully","duration":5.7028330000002825,"failureMessages":[],"meta":{}}],"startTime":1770740162000,"endTime":1770740168031.703,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/index.test.ts"},{"assertionResults":[{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should output error logs when level is warn","status":"passed","title":"should output error logs when level is warn","duration":2.5425419999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should output warn logs when level is warn","status":"passed","title":"should output warn logs when level is warn","duration":0.2959579999999846,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should NOT output info logs when level is warn","status":"passed","title":"should NOT output info logs when level is warn","duration":0.44700000000000273,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should NOT output debug logs when level is warn","status":"passed","title":"should NOT output debug logs when level is warn","duration":0.21766700000000583,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should output all logs when level is debug with DEBUG flag","status":"passed","title":"should output all logs when level is debug with DEBUG flag","duration":0.19970899999998437,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should only output error logs when level is error","status":"passed","title":"should only output error logs when level is error","duration":0.14441600000000676,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should output NO logs when level is silent","status":"passed","title":"should output NO logs when level is silent","duration":0.11095900000000825,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Priority"],"fullName":"Logger Log Level Priority should output info+ logs when level is info","status":"passed","title":"should output info+ logs when level is info","duration":0.2663750000000107,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Format Options"],"fullName":"Logger Format Options should use simple format by default","status":"passed","title":"should use simple format by default","duration":0.3410000000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Format Options"],"fullName":"Logger Format Options should include timestamp in simple format when enabled","status":"passed","title":"should include timestamp in simple format when enabled","duration":0.15220899999999915,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Format Options"],"fullName":"Logger Format Options should not include timestamp in simple format when disabled","status":"passed","title":"should not include timestamp in simple format when disabled","duration":1.4645419999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Format Options"],"fullName":"Logger Format Options should use JSON format when specified","status":"passed","title":"should use JSON format when specified","duration":0.28191699999999287,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Format Options"],"fullName":"Logger Format Options should include metadata in JSON format","status":"passed","title":"should include metadata in JSON format","duration":0.19704200000001038,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Format Options"],"fullName":"Logger Format Options should include timestamp in JSON format when enabled","status":"passed","title":"should include timestamp in JSON format when enabled","duration":0.0887920000000122,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Format Options"],"fullName":"Logger Format Options should not include timestamp in JSON format when disabled","status":"passed","title":"should not include timestamp in JSON format when disabled","duration":0.17766700000001379,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Environment Variable Override"],"fullName":"Logger Environment Variable Override should override log level with RATE_LIMIT_FALLBACK_LOG_LEVEL","status":"passed","title":"should override log level with RATE_LIMIT_FALLBACK_LOG_LEVEL","duration":0.07058299999999917,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Environment Variable Override"],"fullName":"Logger Environment Variable Override should override to info level with RATE_LIMIT_FALLBACK_LOG_LEVEL","status":"passed","title":"should override to info level with RATE_LIMIT_FALLBACK_LOG_LEVEL","duration":0.06083399999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Environment Variable Override"],"fullName":"Logger Environment Variable Override should ignore invalid log level in RATE_LIMIT_FALLBACK_LOG_LEVEL","status":"passed","title":"should ignore invalid log level in RATE_LIMIT_FALLBACK_LOG_LEVEL","duration":0.05587499999998613,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Environment Variable Override"],"fullName":"Logger Environment Variable Override should override to silent level with RATE_LIMIT_FALLBACK_LOG_LEVEL","status":"passed","title":"should override to silent level with RATE_LIMIT_FALLBACK_LOG_LEVEL","duration":0.05225000000001501,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","process.env.DEBUG Flag"],"fullName":"Logger process.env.DEBUG Flag should NOT output debug logs when process.env.DEBUG is not set","status":"passed","title":"should NOT output debug logs when process.env.DEBUG is not set","duration":0.04112499999999386,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","process.env.DEBUG Flag"],"fullName":"Logger process.env.DEBUG Flag should output debug logs when process.env.DEBUG is set","status":"passed","title":"should output debug logs when process.env.DEBUG is set","duration":0.04229100000000585,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","process.env.DEBUG Flag"],"fullName":"Logger process.env.DEBUG Flag should allow other log levels when process.env.DEBUG is not set","status":"passed","title":"should allow other log levels when process.env.DEBUG is not set","duration":0.06512499999999477,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","process.env.DEBUG Flag"],"fullName":"Logger process.env.DEBUG Flag should output all logs including debug when process.env.DEBUG is set","status":"passed","title":"should output all logs including debug when process.env.DEBUG is set","duration":0.07175000000000864,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Default Config"],"fullName":"Logger Default Config should use default config when no config is provided","status":"passed","title":"should use default config when no config is provided","duration":0.053375000000016826,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Default Config"],"fullName":"Logger Default Config should use default component name when not provided","status":"passed","title":"should use default component name when not provided","duration":0.22066699999999173,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Console Method Selection"],"fullName":"Logger Console Method Selection should use console.error for error level","status":"passed","title":"should use console.error for error level","duration":0.0992920000000197,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Console Method Selection"],"fullName":"Logger Console Method Selection should use console.warn for warn level","status":"passed","title":"should use console.warn for warn level","duration":0.2794590000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Console Method Selection"],"fullName":"Logger Console Method Selection should use console.debug for debug level","status":"passed","title":"should use console.debug for debug level","duration":0.1058749999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Console Method Selection"],"fullName":"Logger Console Method Selection should use console.log for info level","status":"passed","title":"should use console.log for info level","duration":0.07816700000000765,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Error Handling"],"fullName":"Logger Error Handling should handle log output errors gracefully","status":"passed","title":"should handle log output errors gracefully","duration":0.34083400000000097,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Error Handling"],"fullName":"Logger Error Handling should handle formatting errors gracefully","status":"passed","title":"should handle formatting errors gracefully","duration":0.09470799999999713,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","createLogger Helper"],"fullName":"Logger createLogger Helper should create a Logger instance","status":"passed","title":"should create a Logger instance","duration":0.08433399999998414,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","createLogger Helper"],"fullName":"Logger createLogger Helper should use default component name when not specified","status":"passed","title":"should use default component name when not specified","duration":0.051665999999983114,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","createLogger Helper"],"fullName":"Logger createLogger Helper should accept partial config","status":"passed","title":"should accept partial config","duration":0.04866699999999469,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Metadata Handling"],"fullName":"Logger Metadata Handling should handle empty metadata","status":"passed","title":"should handle empty metadata","duration":0.08933300000001054,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Metadata Handling"],"fullName":"Logger Metadata Handling should handle undefined metadata","status":"passed","title":"should handle undefined metadata","duration":0.0679580000000044,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Metadata Handling"],"fullName":"Logger Metadata Handling should include metadata in JSON format","status":"passed","title":"should include metadata in JSON format","duration":0.0957920000000172,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Metadata Handling"],"fullName":"Logger Metadata Handling should ignore metadata in simple format","status":"passed","title":"should ignore metadata in simple format","duration":0.24166599999998084,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Boundary Values"],"fullName":"Logger Log Level Boundary Values should output error logs at all levels except silent","status":"passed","title":"should output error logs at all levels except silent","duration":0.10520800000000463,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Boundary Values"],"fullName":"Logger Log Level Boundary Values should respect silent level boundary (no logs at silent)","status":"passed","title":"should respect silent level boundary (no logs at silent)","duration":0.05154200000001197,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Log Level Boundary Values"],"fullName":"Logger Log Level Boundary Values should only output info+ at info level","status":"passed","title":"should only output info+ at info level","duration":0.07829200000000469,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Component Name"],"fullName":"Logger Component Name should use custom component name","status":"passed","title":"should use custom component name","duration":0.07687500000000114,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Component Name"],"fullName":"Logger Component Name should include component name in simple format","status":"passed","title":"should include component name in simple format","duration":0.07450000000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Logger","Component Name"],"fullName":"Logger Component Name should include component name in JSON format","status":"passed","title":"should include component name in JSON format","duration":0.050083000000000766,"failureMessages":[],"meta":{}}],"startTime":1770740161924,"endTime":1770740161934.2417,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/logger.test.ts"},{"assertionResults":[{"ancestorTitles":["MetricsManager","Initialization"],"fullName":"MetricsManager Initialization should create MetricsManager instance with default metrics","status":"passed","title":"should create MetricsManager instance with default metrics","duration":0.9661670000000129,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","Initialization"],"fullName":"MetricsManager Initialization should start reset timer when enabled","status":"passed","title":"should start reset timer when enabled","duration":0.20345899999998096,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","Initialization"],"fullName":"MetricsManager Initialization should not start reset timer when disabled","status":"passed","title":"should not start reset timer when disabled","duration":0.1769999999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordRateLimit"],"fullName":"MetricsManager recordRateLimit should record first rate limit event","status":"passed","title":"should record first rate limit event","duration":0.36858399999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordRateLimit"],"fullName":"MetricsManager recordRateLimit should record multiple rate limit events for same model","status":"passed","title":"should record multiple rate limit events for same model","duration":1.01400000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordRateLimit"],"fullName":"MetricsManager recordRateLimit should track rate limits for different models separately","status":"passed","title":"should track rate limits for different models separately","duration":0.14058399999998983,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordRateLimit"],"fullName":"MetricsManager recordRateLimit should calculate average interval correctly","status":"passed","title":"should calculate average interval correctly","duration":0.30379100000001813,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordRateLimit"],"fullName":"MetricsManager recordRateLimit should not record when disabled","status":"passed","title":"should not record when disabled","duration":0.1328749999999843,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackStart"],"fullName":"MetricsManager recordFallbackStart should return current timestamp","status":"passed","title":"should return current timestamp","duration":0.32895899999999756,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackStart"],"fullName":"MetricsManager recordFallbackStart should return 0 when disabled","status":"passed","title":"should return 0 when disabled","duration":0.1228749999999934,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackSuccess"],"fullName":"MetricsManager recordFallbackSuccess should record successful fallback","status":"passed","title":"should record successful fallback","duration":0.1255000000000166,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackSuccess"],"fullName":"MetricsManager recordFallbackSuccess should calculate average duration correctly","status":"passed","title":"should calculate average duration correctly","duration":0.16470800000001873,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackSuccess"],"fullName":"MetricsManager recordFallbackSuccess should track fallback by target model","status":"passed","title":"should track fallback by target model","duration":0.08991700000001401,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackSuccess"],"fullName":"MetricsManager recordFallbackSuccess should not record when disabled","status":"passed","title":"should not record when disabled","duration":0.06741700000000606,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackFailure"],"fullName":"MetricsManager recordFallbackFailure should record failed fallback","status":"passed","title":"should record failed fallback","duration":0.08074999999999477,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackFailure"],"fullName":"MetricsManager recordFallbackFailure should track multiple failures","status":"passed","title":"should track multiple failures","duration":0.05279099999998493,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordFallbackFailure"],"fullName":"MetricsManager recordFallbackFailure should not record when disabled","status":"passed","title":"should not record when disabled","duration":0.04554199999998332,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelRequest"],"fullName":"MetricsManager recordModelRequest should record model request","status":"passed","title":"should record model request","duration":0.09624999999999773,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelRequest"],"fullName":"MetricsManager recordModelRequest should track multiple requests","status":"passed","title":"should track multiple requests","duration":0.05945800000000645,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelRequest"],"fullName":"MetricsManager recordModelRequest should not record when disabled","status":"passed","title":"should not record when disabled","duration":0.05595800000000395,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelSuccess"],"fullName":"MetricsManager recordModelSuccess should record model success","status":"passed","title":"should record model success","duration":0.09300000000001774,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelSuccess"],"fullName":"MetricsManager recordModelSuccess should calculate average response time","status":"passed","title":"should calculate average response time","duration":0.06425000000001546,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelSuccess"],"fullName":"MetricsManager recordModelSuccess should not record when disabled","status":"passed","title":"should not record when disabled","duration":0.0459160000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelFailure"],"fullName":"MetricsManager recordModelFailure should record model failure","status":"passed","title":"should record model failure","duration":0.09658300000000963,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelFailure"],"fullName":"MetricsManager recordModelFailure should track multiple failures","status":"passed","title":"should track multiple failures","duration":0.05820800000000759,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","recordModelFailure"],"fullName":"MetricsManager recordModelFailure should not record when disabled","status":"passed","title":"should not record when disabled","duration":0.05541699999997718,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","getMetrics"],"fullName":"MetricsManager getMetrics should update generatedAt timestamp","status":"passed","title":"should update generatedAt timestamp","duration":0.12979100000001154,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","export"],"fullName":"MetricsManager export should export as JSON by default","status":"passed","title":"should export as JSON by default","duration":0.24295899999998483,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","export"],"fullName":"MetricsManager export should export as JSON format","status":"passed","title":"should export as JSON format","duration":0.09195800000000531,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","export"],"fullName":"MetricsManager export should export as pretty format","status":"passed","title":"should export as pretty format","duration":2.1087499999999864,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","export"],"fullName":"MetricsManager export should export as CSV format","status":"passed","title":"should export as CSV format","duration":0.3793749999999818,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","export"],"fullName":"MetricsManager export should include all data in pretty format","status":"passed","title":"should include all data in pretty format","duration":0.5975830000000428,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","export"],"fullName":"MetricsManager export should show no data message when empty in pretty format","status":"passed","title":"should show no data message when empty in pretty format","duration":0.23762499999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","report"],"fullName":"MetricsManager report should log to console when enabled","status":"passed","title":"should log to console when enabled","duration":0.7090000000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","report"],"fullName":"MetricsManager report should not log to console when disabled","status":"passed","title":"should not log to console when disabled","duration":0.3841669999999908,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","report"],"fullName":"MetricsManager report should not report when disabled","status":"passed","title":"should not report when disabled","duration":0.368583000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","report"],"fullName":"MetricsManager report should write to file when specified","status":"passed","title":"should write to file when specified","duration":0.9513749999999845,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","report"],"fullName":"MetricsManager report should handle file write errors gracefully","status":"passed","title":"should handle file write errors gracefully","duration":0.2747910000000502,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","reset"],"fullName":"MetricsManager reset should clear all metrics","status":"passed","title":"should clear all metrics","duration":0.20687499999996817,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","reset"],"fullName":"MetricsManager reset should reset timestamps","status":"passed","title":"should reset timestamps","duration":0.26345900000001166,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","destroy"],"fullName":"MetricsManager destroy should clear reset timer","status":"passed","title":"should clear reset timer","duration":0.1311659999999506,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","destroy"],"fullName":"MetricsManager destroy should be safe to call multiple times","status":"passed","title":"should be safe to call multiple times","duration":0.35770800000000236,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","Integration"],"fullName":"MetricsManager Integration should track complete fallback flow","status":"passed","title":"should track complete fallback flow","duration":0.3936249999999859,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","Integration"],"fullName":"MetricsManager Integration should track multiple models performance","status":"passed","title":"should track multiple models performance","duration":0.401958000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["MetricsManager","Integration"],"fullName":"MetricsManager Integration should handle mixed successes and failures","status":"passed","title":"should handle mixed successes and failures","duration":0.18266699999998082,"failureMessages":[],"meta":{}}],"startTime":1770740161950,"endTime":1770740161964.4019,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/metrics.test.ts"},{"assertionResults":[{"ancestorTitles":["ErrorPatternRegistry","Default Patterns"],"fullName":"ErrorPatternRegistry Default Patterns should have default patterns registered on initialization","status":"passed","title":"should have default patterns registered on initialization","duration":0.7802909999999912,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","Default Patterns"],"fullName":"ErrorPatternRegistry Default Patterns should have patterns sorted by priority (higher first)","status":"passed","title":"should have patterns sorted by priority (higher first)","duration":0.1682079999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect HTTP 429 status code errors","status":"passed","title":"should detect HTTP 429 status code errors","duration":0.10062499999999375,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect rate limit keyword in error message","status":"passed","title":"should detect rate limit keyword in error message","duration":0.2157499999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect rate limit in responseBody","status":"passed","title":"should detect rate limit in responseBody","duration":0.0679580000000044,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect \"too many requests\" keyword","status":"passed","title":"should detect \"too many requests\" keyword","duration":0.09729200000001015,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect \"quota exceeded\" keyword","status":"passed","title":"should detect \"quota exceeded\" keyword","duration":0.07387500000000102,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect 429 in error text (with word boundaries)","status":"passed","title":"should detect 429 in error text (with word boundaries)","duration":0.039458999999993694,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should NOT detect 429 as part of a larger number (e.g., 4291)","status":"skipped","title":"should NOT detect 429 as part of a larger number (e.g., 4291)","failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should NOT detect non-rate-limit errors","status":"passed","title":"should NOT detect non-rate-limit errors","duration":0.18599999999999284,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should NOT detect timeout errors","status":"passed","title":"should NOT detect timeout errors","duration":0.0609579999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should handle null or undefined errors gracefully","status":"passed","title":"should handle null or undefined errors gracefully","duration":0.06691699999998946,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect Anthropic-specific rate limit messages","status":"passed","title":"should detect Anthropic-specific rate limit messages","duration":0.06954199999999844,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect Google/Gemini-specific rate limit messages","status":"passed","title":"should detect Google/Gemini-specific rate limit messages","duration":0.06912499999999966,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should detect OpenAI-specific rate limit messages","status":"passed","title":"should detect OpenAI-specific rate limit messages","duration":0.061958000000004176,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","isRateLimitError() - Error Detection"],"fullName":"ErrorPatternRegistry isRateLimitError() - Error Detection should be case-insensitive when matching patterns","status":"passed","title":"should be case-insensitive when matching patterns","duration":0.05570799999999565,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","getMatchedPattern()"],"fullName":"ErrorPatternRegistry getMatchedPattern() should return the matching pattern for a rate limit error","status":"passed","title":"should return the matching pattern for a rate limit error","duration":0.29658399999999574,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","getMatchedPattern()"],"fullName":"ErrorPatternRegistry getMatchedPattern() should return null for non-rate-limit errors","status":"passed","title":"should return null for non-rate-limit errors","duration":0.5755410000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","getMatchedPattern()"],"fullName":"ErrorPatternRegistry getMatchedPattern() should return highest priority matching pattern","status":"passed","title":"should return highest priority matching pattern","duration":0.04733300000000895,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","register()"],"fullName":"ErrorPatternRegistry register() should add a new pattern","status":"passed","title":"should add a new pattern","duration":0.06333300000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","register()"],"fullName":"ErrorPatternRegistry register() should update an existing pattern with the same name","status":"passed","title":"should update an existing pattern with the same name","duration":0.06349999999999056,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","register()"],"fullName":"ErrorPatternRegistry register() should sort patterns by priority after registration","status":"passed","title":"should sort patterns by priority after registration","duration":0.18658299999999883,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","registerMany()"],"fullName":"ErrorPatternRegistry registerMany() should register multiple patterns at once","status":"passed","title":"should register multiple patterns at once","duration":0.031207999999992353,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","removePattern()"],"fullName":"ErrorPatternRegistry removePattern() should remove a pattern by name","status":"passed","title":"should remove a pattern by name","duration":0.052707999999995536,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","removePattern()"],"fullName":"ErrorPatternRegistry removePattern() should return false when trying to remove non-existent pattern","status":"passed","title":"should return false when trying to remove non-existent pattern","duration":0.02374999999999261,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","clearAllPatterns()"],"fullName":"ErrorPatternRegistry clearAllPatterns() should clear all patterns","status":"passed","title":"should clear all patterns","duration":0.029875000000004093,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","resetToDefaults()"],"fullName":"ErrorPatternRegistry resetToDefaults() should reset to default patterns","status":"passed","title":"should reset to default patterns","duration":0.05562499999999204,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","getStats()"],"fullName":"ErrorPatternRegistry getStats() should return statistics about registered patterns","status":"passed","title":"should return statistics about registered patterns","duration":0.1261249999999876,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","getStats()"],"fullName":"ErrorPatternRegistry getStats() should group patterns by provider","status":"passed","title":"should group patterns by provider","duration":0.0347500000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","getPatternsForProvider()"],"fullName":"ErrorPatternRegistry getPatternsForProvider() should return patterns for a specific provider","status":"passed","title":"should return patterns for a specific provider","duration":0.048500000000004206,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","getPatternsForProvider()"],"fullName":"ErrorPatternRegistry getPatternsForProvider() should return generic patterns when provider is not specified","status":"passed","title":"should return generic patterns when provider is not specified","duration":0.0448340000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["ErrorPatternRegistry","addLearnedPattern()"],"fullName":"ErrorPatternRegistry addLearnedPattern() should log warning (not implemented)","status":"passed","title":"should log warning (not implemented)","duration":0.48929099999999437,"failureMessages":[],"meta":{}}],"startTime":1770740162052,"endTime":1770740162056.4893,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/patternregistry.test.ts"},{"assertionResults":[{"ancestorTitles":["RetryManager","Initialization"],"fullName":"RetryManager Initialization should create RetryManager instance with default config","status":"passed","title":"should create RetryManager instance with default config","duration":2.2126250000000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","Initialization"],"fullName":"RetryManager Initialization should create RetryManager instance with custom config","status":"passed","title":"should create RetryManager instance with custom config","duration":0.42312499999999886,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","Initialization"],"fullName":"RetryManager Initialization should validate and fix invalid config","status":"passed","title":"should validate and fix invalid config","duration":0.29962500000002024,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","canRetry"],"fullName":"RetryManager canRetry should allow retry when maxRetries > 0 and no attempts","status":"passed","title":"should allow retry when maxRetries > 0 and no attempts","duration":0.22704099999998562,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","canRetry"],"fullName":"RetryManager canRetry should not allow retry when maxRetries is 0","status":"passed","title":"should not allow retry when maxRetries is 0","duration":0.10716600000000653,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","canRetry"],"fullName":"RetryManager canRetry should allow retry until maxRetries is reached","status":"passed","title":"should allow retry until maxRetries is reached","duration":0.1790420000000097,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","canRetry"],"fullName":"RetryManager canRetry should not allow retry when timeout is exceeded","status":"passed","title":"should not allow retry when timeout is exceeded","duration":151.619375,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should return 0 for immediate strategy","status":"passed","title":"should return 0 for immediate strategy","duration":0.12033300000001645,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should calculate exponential delay","status":"passed","title":"should calculate exponential delay","duration":0.31741599999998016,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should calculate linear delay","status":"passed","title":"should calculate linear delay","duration":0.1898329999999646,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should calculate polynomial delay","status":"passed","title":"should calculate polynomial delay","duration":0.08545900000001438,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should use default polynomial parameters when not specified","status":"passed","title":"should use default polynomial parameters when not specified","duration":0.04399999999998272,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should use custom strategy function","status":"passed","title":"should use custom strategy function","duration":0.08087500000004866,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should fall back to immediate when custom strategy is missing","status":"passed","title":"should fall back to immediate when custom strategy is missing","duration":0.03291699999999764,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should clamp custom strategy return value to maxDelayMs","status":"passed","title":"should clamp custom strategy return value to maxDelayMs","duration":0.03837500000003047,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should clamp negative custom strategy return value to 0","status":"passed","title":"should clamp negative custom strategy return value to 0","duration":0.031999999999982265,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should handle custom strategy function errors gracefully","status":"passed","title":"should handle custom strategy function errors gracefully","duration":0.04904199999998582,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","getRetryDelay"],"fullName":"RetryManager getRetryDelay should apply jitter when enabled","status":"passed","title":"should apply jitter when enabled","duration":0.14716700000002447,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","recordRetry"],"fullName":"RetryManager recordRetry should record retry attempt","status":"passed","title":"should record retry attempt","duration":0.11629199999998718,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","recordRetry"],"fullName":"RetryManager recordRetry should update stats on retry","status":"passed","title":"should update stats on retry","duration":0.0843749999999659,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","recordSuccess and recordFailure"],"fullName":"RetryManager recordSuccess and recordFailure should record successful retry","status":"passed","title":"should record successful retry","duration":0.04604100000000244,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","recordSuccess and recordFailure"],"fullName":"RetryManager recordSuccess and recordFailure should record failed retry","status":"passed","title":"should record failed retry","duration":0.03279200000002902,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","reset"],"fullName":"RetryManager reset should reset retry state for specific message","status":"passed","title":"should reset retry state for specific message","duration":0.05808300000001054,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","reset"],"fullName":"RetryManager reset should reset all retry state for session","status":"passed","title":"should reset all retry state for session","duration":0.03437500000001137,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","cleanupStaleEntries"],"fullName":"RetryManager cleanupStaleEntries should remove stale entries","status":"passed","title":"should remove stale entries","duration":99.76129100000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","updateConfig"],"fullName":"RetryManager updateConfig should update configuration","status":"passed","title":"should update configuration","duration":0.07183299999996962,"failureMessages":[],"meta":{}},{"ancestorTitles":["RetryManager","updateConfig"],"fullName":"RetryManager updateConfig should validate updated config","status":"passed","title":"should validate updated config","duration":0.04304199999995717,"failureMessages":[],"meta":{}}],"startTime":1770740161947,"endTime":1770740162204.0718,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/retry.test.ts"},{"assertionResults":[{"ancestorTitles":["ConfigValidator","validate() - Basic Validation"],"fullName":"ConfigValidator validate() - Basic Validation should validate a valid config","status":"passed","title":"should validate a valid config","duration":1.1012089999999972,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Basic Validation"],"fullName":"ConfigValidator validate() - Basic Validation should invalidate a config with errors in strict mode","status":"passed","title":"should invalidate a config with errors in strict mode","duration":1.1835839999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Basic Validation"],"fullName":"ConfigValidator validate() - Basic Validation should accept valid fallback mode values","status":"passed","title":"should accept valid fallback mode values","duration":0.24816699999999514,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Basic Validation"],"fullName":"ConfigValidator validate() - Basic Validation should reject invalid fallback mode (strict mode)","status":"passed","title":"should reject invalid fallback mode (strict mode)","duration":0.3452079999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Basic Validation"],"fullName":"ConfigValidator validate() - Basic Validation should warn for empty fallback models array","status":"passed","title":"should warn for empty fallback models array","duration":0.16420800000000213,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Basic Validation"],"fullName":"ConfigValidator validate() - Basic Validation should reject negative cooldownMs (strict mode)","status":"passed","title":"should reject negative cooldownMs (strict mode)","duration":0.2883329999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Basic Validation"],"fullName":"ConfigValidator validate() - Basic Validation should apply default values for optional properties","status":"passed","title":"should apply default values for optional properties","duration":0.06662500000000193,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Retry Policy Validation"],"fullName":"ConfigValidator validate() - Retry Policy Validation should validate a valid retry policy","status":"passed","title":"should validate a valid retry policy","duration":0.13166599999999562,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Retry Policy Validation"],"fullName":"ConfigValidator validate() - Retry Policy Validation should reject negative maxRetries (strict mode)","status":"passed","title":"should reject negative maxRetries (strict mode)","duration":0.1932079999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Retry Policy Validation"],"fullName":"ConfigValidator validate() - Retry Policy Validation should reject invalid retry strategy (strict mode)","status":"passed","title":"should reject invalid retry strategy (strict mode)","duration":0.1106669999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Circuit Breaker Validation"],"fullName":"ConfigValidator validate() - Circuit Breaker Validation should validate a valid circuit breaker config","status":"passed","title":"should validate a valid circuit breaker config","duration":0.08216699999999832,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Circuit Breaker Validation"],"fullName":"ConfigValidator validate() - Circuit Breaker Validation should reject negative failureThreshold (strict mode)","status":"passed","title":"should reject negative failureThreshold (strict mode)","duration":0.13741599999998755,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Circuit Breaker Validation"],"fullName":"ConfigValidator validate() - Circuit Breaker Validation should reject halfOpenMaxCalls less than 1 (strict mode)","status":"passed","title":"should reject halfOpenMaxCalls less than 1 (strict mode)","duration":0.07033299999999088,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Health Tracking Validation"],"fullName":"ConfigValidator validate() - Health Tracking Validation should validate a valid health tracking config","status":"passed","title":"should validate a valid health tracking config","duration":0.0764999999999958,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Health Tracking Validation"],"fullName":"ConfigValidator validate() - Health Tracking Validation should reject path with directory traversal attempt (strict mode)","status":"passed","title":"should reject path with directory traversal attempt (strict mode)","duration":0.11254100000000733,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Error Patterns Validation"],"fullName":"ConfigValidator validate() - Error Patterns Validation should validate valid custom error patterns","status":"passed","title":"should validate valid custom error patterns","duration":0.08187499999999659,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Error Patterns Validation"],"fullName":"ConfigValidator validate() - Error Patterns Validation should reject error pattern with empty name (strict mode)","status":"skipped","title":"should reject error pattern with empty name (strict mode)","failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Error Patterns Validation"],"fullName":"ConfigValidator validate() - Error Patterns Validation should reject error pattern with empty patterns array (strict mode)","status":"skipped","title":"should reject error pattern with empty patterns array (strict mode)","failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","validate() - Error Patterns Validation"],"fullName":"ConfigValidator validate() - Error Patterns Validation should reject error pattern with invalid priority (strict mode)","status":"skipped","title":"should reject error pattern with invalid priority (strict mode)","failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","getDiagnostics() - Diagnostic Output"],"fullName":"ConfigValidator getDiagnostics() - Diagnostic Output should generate diagnostic information for a valid config","status":"passed","title":"should generate diagnostic information for a valid config","duration":0.06795799999999019,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigValidator","getDiagnostics() - Diagnostic Output"],"fullName":"ConfigValidator getDiagnostics() - Diagnostic Output should include warnings in diagnostics (strict mode)","status":"passed","title":"should include warnings in diagnostics (strict mode)","duration":0.047708000000000084,"failureMessages":[],"meta":{}}],"startTime":1770740162052,"endTime":1770740162057.0818,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/validator.test.ts"},{"assertionResults":[{"ancestorTitles":["ConfigWatcher","Initialization"],"fullName":"ConfigWatcher Initialization should create a ConfigWatcher instance","status":"passed","title":"should create a ConfigWatcher instance","duration":1.141458,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","Initialization"],"fullName":"ConfigWatcher Initialization should not start watching if disabled","status":"passed","title":"should not start watching if disabled","duration":0.8033330000000092,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","Initialization"],"fullName":"ConfigWatcher Initialization should not start watching if watchFile is disabled","status":"passed","title":"should not start watching if watchFile is disabled","duration":0.5870000000000175,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","Initialization"],"fullName":"ConfigWatcher Initialization should warn if no config path provided","status":"passed","title":"should warn if no config path provided","duration":0.38341700000000856,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","File Watching"],"fullName":"ConfigWatcher File Watching should start watching when enabled and path provided","status":"passed","title":"should start watching when enabled and path provided","duration":0.8990420000000086,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","File Watching"],"fullName":"ConfigWatcher File Watching should detect file changes and trigger reload","status":"passed","title":"should detect file changes and trigger reload","duration":253.94983299999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","File Watching"],"fullName":"ConfigWatcher File Watching should debounce multiple rapid changes","status":"passed","title":"should debounce multiple rapid changes","duration":418.89887500000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","File Watching"],"fullName":"ConfigWatcher File Watching should skip reload if already reloading","status":"passed","title":"should skip reload if already reloading","duration":458.0475419999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","File Watching"],"fullName":"ConfigWatcher File Watching should handle reload errors gracefully","status":"passed","title":"should handle reload errors gracefully","duration":256.49316699999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","Lifecycle Management"],"fullName":"ConfigWatcher Lifecycle Management should stop watching when stop is called","status":"passed","title":"should stop watching when stop is called","duration":2.042500000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","Lifecycle Management"],"fullName":"ConfigWatcher Lifecycle Management should handle errors when stopping watcher","status":"passed","title":"should handle errors when stopping watcher","duration":2.3983749999999873,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","Lifecycle Management"],"fullName":"ConfigWatcher Lifecycle Management should stop debounce timer when stopping","status":"passed","title":"should stop debounce timer when stopping","duration":102.70183400000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigWatcher","Error Handling"],"fullName":"ConfigWatcher Error Handling should handle watch initialization errors gracefully","status":"passed","title":"should handle watch initialization errors gracefully","duration":1.600500000000011,"failureMessages":[],"meta":{}}],"startTime":1770740161928,"endTime":1770740163428.6006,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/config/watcher.test.ts"},{"assertionResults":[{"ancestorTitles":["ConfigReloader","Initialization"],"fullName":"ConfigReloader Initialization should create a ConfigReloader instance","status":"passed","title":"should create a ConfigReloader instance","duration":1.581542000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Initialization"],"fullName":"ConfigReloader Initialization should initialize with zero reload metrics","status":"passed","title":"should initialize with zero reload metrics","duration":0.5840409999999849,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should reload configuration successfully","status":"passed","title":"should reload configuration successfully","duration":2.082084000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should track successful reload metrics","status":"passed","title":"should track successful reload metrics","duration":0.5724580000000117,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should handle missing config path","status":"passed","title":"should handle missing config path","duration":0.41712499999999864,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should handle validation errors in strict mode","status":"passed","title":"should handle validation errors in strict mode","duration":1.3647919999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should warn about validation errors in non-strict mode","status":"passed","title":"should warn about validation errors in non-strict mode","duration":1.4746249999999748,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should not show toast when notifyOnReload is false","status":"passed","title":"should not show toast when notifyOnReload is false","duration":0.452083000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should log configuration changes","status":"passed","title":"should log configuration changes","duration":0.7617499999999495,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Configuration Reload"],"fullName":"ConfigReloader Configuration Reload should handle missing metricsManager","status":"passed","title":"should handle missing metricsManager","duration":0.48316699999998036,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Reload Metrics"],"fullName":"ConfigReloader Reload Metrics should track multiple reloads","status":"passed","title":"should track multiple reloads","duration":0.6022919999999772,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Reload Metrics"],"fullName":"ConfigReloader Reload Metrics should track mixed success and failure","status":"passed","title":"should track mixed success and failure","duration":0.6202499999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Reload Metrics"],"fullName":"ConfigReloader Reload Metrics should return a copy of metrics","status":"passed","title":"should return a copy of metrics","duration":0.4367089999999507,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Component Updates"],"fullName":"ConfigReloader Component Updates should update fallbackHandler with new config","status":"passed","title":"should update fallbackHandler with new config","duration":0.39595800000000736,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Component Updates"],"fullName":"ConfigReloader Component Updates should update metricsManager with new config","status":"passed","title":"should update metricsManager with new config","duration":0.40862499999997226,"failureMessages":[],"meta":{}},{"ancestorTitles":["ConfigReloader","Get Current Config"],"fullName":"ConfigReloader Get Current Config should return current configuration","status":"passed","title":"should return current configuration","duration":0.2674159999999688,"failureMessages":[],"meta":{}}],"startTime":1770740161958,"endTime":1770740161970.4087,"status":"passed","message":"","name":"/Users/azumag/work/opencode-rate-limit-fallback/__tests__/main/configreloader.test.ts"}]}
